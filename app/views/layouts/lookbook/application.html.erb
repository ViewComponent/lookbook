<% content_for :body do %>
  <% if request_frame == "root" %>
    <%=
      render Lookbook::UI::Router.new(events_endpoint: @events_endpoint.to_json) do
        render Lookbook::UI::App.new(id: "app", x: {cloak: true}) do |app|
          app.with_header

          app.with_sidebar do |sidebar|
            sidebar.with_previews_nav(@previews.tree)
            sidebar.with_pages_nav(@pages.tree) if @pages.directory_exists?
          end

          app.with_main do
            tag.main { yield }
          end

          if @config.ui_status_bar
            app.with_status_bar(notifications: @notifications)
          end
        end
      end
    %>
  <% elsif request_frame == "main" %>
    <%= tag.main { yield } %>
  <% end %>
<% end %>

<% if frame_request? %>
  <%= yield :body %>
<% else %>
  <%= render template: "layouts/lookbook/skeleton" %>
<% end %>
