<%= render component_tag(:nav,
  key: id,
  class: {"with-filter": filter?},
  x: {
    "data": "navTree('#{id}')",
    "@lookbook:page-update.document": "selectCurrentPageItem(false)",
    "@lookbook:page-load.document": "selectCurrentPageItem(true)",
    "@nav-tree:collapse-all.document": "if ($event.detail.id == id) collapseAll()",
    "effect": "filter()"
  }) do %>
  
  <% if filter? %>
    <div class="nav-filter">
      <input
        placeholder="Filter by name..."
        x-ref="filter"
        x-model="filterText"
        @keydown.esc.stop="clearFilter"
        @keydown.stop>
      </input>
    </div>
  <% end %>
  
  <div class="nav-tree">
    <sl-tree x-ref="nav" selection="single" @sl-expand="itemExpanded" @sl-collapse="itemCollapsed">
      <% children.each do |node| %>
        <%= render Lookbook::UI::NavTreeItem.new(node: node) %>
      <% end %>
    </sl-tree>
  </div>
<% end %>
